{% extends "base.html" %}
{% block title %}Configurar MFA{% endblock %}
{% block content %}
<section class="auth-wrap">
  <h1>Autenticación de dos factores</h1>
  <p class="text-muted">Protege tu cuenta con un código temporal (TOTP) generado desde una app como Google Authenticator o 1Password.</p>
  <form method="post">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <button type="submit">Habilitar MFA</button>
  </form>
  {% if secret %}
    <div class="mt-4">
      <h2>Configuración actual</h2>
      <p>Escanea este URI en tu app TOTP o copia el código manualmente:</p>
      <pre class="bg-light p-3" style="white-space: pre-wrap; word-break: break-all;">{{ uri }}</pre>
      <p><strong>Clave secreta:</strong> {{ secret }}</p>
    </div>
  {% endif %}
  <p class="mt-4"><a href="{{ url_for('dashboard.index') }}">← Volver al panel</a></p>
</section>
{% endblock %}
