{% extends "base.html" %}
{% import "_forms.html" as forms %}
{% block content %}
<h1>Nuevo parte diario</h1>
<form method="post" action="{{ url_for('partes.crear') }}" class="form-grid">
  {{ forms.csrf_field() }}
  <label>Fecha: <input type="date" name="fecha" value="{{ pre.fecha if pre else hoy }}"></label>
  <label>Equipo:
    <select name="equipo_id" required>
      <option value="">— Seleccionar —</option>
      {% for e in equipos %}
        <option value="{{ e.id }}" {{ 'selected' if pre.equipo_id and pre.equipo_id|int == e.id else '' }}>
          {{ e.codigo }} — {{ e.tipo }}
        </option>
      {% endfor %}
    </select>
  </label>
  {% if operadores %}
  <label>Operador:
    <select name="operador_id">
      <option value="">—</option>
      {% for o in operadores %}
        <option value="{{ o.id }}" {{ 'selected' if pre.operador_id and pre.operador_id|int == o.id else '' }}>{{ o.nombre }}</option>
      {% endfor %}
    </select>
  </label>
  {% endif %}
  <label>Turno: <input name="turno" value="{{ pre.turno if pre else 'matutino' }}"></label>
  <label>Ubicación: <input name="ubicacion" value="{{ pre.ubicacion or '' }}"></label>
  <label>Clima: <input name="clima" value="{{ pre.clima or '' }}"></label>
  <label>Horas inicio: <input name="horas_inicio" type="number" step="0.1" value="{{ pre.horas_inicio or '' }}"></label>
  <label>Horas fin: <input name="horas_fin" type="number" step="0.1" value="{{ pre.horas_fin or '' }}"></label>
  <label>Combustible (L): <input name="combustible_l" type="number" step="0.1" value="{{ pre.combustible_l or '' }}"></label>
  <label>Observaciones: <input name="observaciones" value="{{ pre.observaciones or '' }}"></label>
  <button type="submit">Crear</button>
</form>
{% endblock %}
