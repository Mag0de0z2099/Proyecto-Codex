{% extends "base.html" %}
{% block content %}
<h1>Operadores</h1>
<form method="get" class="mb-3">
  <input name="q" value="{{ q }}" placeholder="Buscar por nombre / ID / puesto">
  <button type="submit">Buscar</button>
  {% if DEV_MODE or current_user.is_authenticated %}
    <a href="{{ url_for('operadores.nuevo') }}">Nuevo</a>
  {% endif %}
</form>
<table>
  <thead><tr><th>Nombre</th><th>ID</th><th>Puesto</th><th>Status</th><th></th></tr></thead>
  <tbody>
  {% for op in operadores %}
    <tr>
      <td><a href="{{ url_for('operadores.detalle', op_id=op.id) }}">{{ op.nombre }}</a></td>
      <td>{{ op.identificacion or '-' }}</td>
      <td>{{ op.puesto or '-' }}</td>
      <td>{{ op.status }}</td>
      <td>
        {% if DEV_MODE or current_user.is_authenticated %}
          <a href="{{ url_for('operadores.editar', op_id=op.id) }}">Editar</a>
          <form action="{{ url_for('operadores.eliminar', op_id=op.id) }}" method="post" style="display:inline">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <button type="submit" onclick="return confirm('Â¿Eliminar?')">Eliminar</button>
          </form>
        {% endif %}
      </td>
    </tr>
  {% else %}
    <tr><td colspan="5">No hay operadores registrados.</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
