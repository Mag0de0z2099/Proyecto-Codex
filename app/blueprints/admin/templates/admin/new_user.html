{% extends "base.html" %}
{% block title %}Crear usuario{% endblock %}
{% block content %}
<h2>Crear usuario</h2>
<form method="post" action="{{ url_for('admin.admin_create_user') }}" class="form" style="max-width:460px">
  <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
  <div style="margin:.5rem 0">
    <label>Usuario</label><br>
    <input type="text" name="username" required autofocus style="width:100%">
  </div>
  <div style="margin:.5rem 0">
    <label>Email (opcional)</label><br>
    <input type="email" name="email" style="width:100%">
  </div>
  <div style="margin:.5rem 0">
    <label>Contraseña</label><br>
    <input type="password" name="password" minlength="8" required style="width:100%">
  </div>
  <div style="margin:.5rem 0">
    <label>Rol</label><br>
    <select name="role" required style="width:100%">
      <option value="viewer">Viewer</option>
      <option value="editor">Editor</option>
      <option value="supervisor">Supervisor</option>
      <option value="admin">Administrador</option>
    </select>
  </div>
  <div style="margin:.5rem 0">
    <label>Categoría (opcional)</label><br>
    <select name="category" style="width:100%">
      <option value="">(ninguna)</option>
      <option value="contratista">Contratista</option>
      <option value="operario">Operario</option>
      <option value="inspector">Inspector</option>
      <option value="ingenieria">Ingeniería</option>
      <option value="seguridad">Seguridad</option>
    </select>
  </div>
  <div style="margin:.5rem 0">
    <label>Cargo o puesto (opcional)</label><br>
    <input type="text" name="title" maxlength="80" style="width:100%">
  </div>
  <div style="margin:.5rem 0">
    <label><input type="checkbox" name="is_admin"> ¿Administrador?</label>
  </div>
  <div style="margin:.5rem 0">
    <label><input type="checkbox" name="force_change"> ¿Requerir cambio de contraseña al primer login?</label>
  </div>
  <button type="submit">Crear</button>
  <p style="margin-top:.5rem"><a href="{{ url_for('admin.index') }}">Volver</a></p>
</form>
{% endblock %}
