{% extends "base.html" %}
{% block title %}Carpetas – SGC{% endblock %}
{% block content %}
<div class="container py-4">
  <h2>Carpetas</h2>
  <form class="row g-2 mb-3" method="post" action="{{ url_for('admin.folders_create') }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
    <div class="col-md-4">
      <label class="form-label">Proyecto</label>
      <select class="form-select" name="project_id" required>
        <option value="">Selecciona…</option>
        {% for p in projects %}
          <option value="{{ p.id }}">{{ p.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-4">
      <label class="form-label">Ruta lógica</label>
      <input class="form-control" name="logical_path" placeholder="bitacoras/2025/semana_38" required />
    </div>
    <div class="col-md-4">
      <label class="form-label">Ruta física (servidor)</label>
      <input class="form-control" name="fs_path" placeholder="/srv/data/proyecto/semana_38" required />
    </div>
    <div class="col-md-4 d-flex align-items-end">
      <button class="btn btn-primary">Crear carpeta</button>
    </div>
  </form>

  <table class="table table-sm table-striped">
    <thead><tr><th>Proyecto</th><th>Ruta lógica</th><th>Ruta física</th><th>Creada</th></tr></thead>
    <tbody>
      {% for f in folders %}
      <tr>
        <td>{{ f.project.name }}</td>
        <td><code>{{ f.logical_path }}</code></td>
        <td><code>{{ f.fs_path }}</code></td>
        <td>
          {% if f.created_at %}
            {{ f.created_at.strftime("%Y-%m-%d %H:%M") }}
          {% else %}-{% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
